{"mappings":"AAAA,SAAS;IACL,SAAS,cAAc,CAAC,OAAO,WAAW,GAAG,CAAC,EAAE,KAAK,SAAS,CAAC,KAAK;IACpE,EAAE,KAAK,SAAS,CAAC,SAAS,CAAC;AAC/B;AACA,SAAS,eAAe,GAAG,EAAE,GAAG,EAAE,GAAG;IACjC,OAAO,cAAc,CAAC,KAAK,KAAK;QAC5B;YACI,QAAQ,GAAG,CAAC,CAAC,IAAI,EAAE,IAAI,CAAC,EAAE,IAAI,CAAC;YAC/B,OAAO;QACX;QACA,KAAI,MAAM;YACN,IAAI,WAAW,KAAK;gBAChB,MAAM;gBACN,QAAQ,GAAG,CAAC,CAAC,IAAI,EAAE,IAAI,CAAC,EAAE,OAAO,CAAC;gBAClC,QAAQ,QAAQ,WAAW;;gBAC3B;YACJ;QACJ;IACJ;AACJ;AACA,SAAS,eAAe,GAAG,EAAE,GAAG,EAAE,GAAG;IACjC,eAAe,KAAK,KAAK;AAC7B;AACA,SAAS,QAAQ,GAAG;IAChB,IAAI,OAAO,QAAQ,YAAY,OAAO,MAClC;IAEJ,OAAO,IAAI,CAAC,KAAK,OAAO,CAAC,CAAA;QACrB,eAAe,KAAK,KAAK,GAAG,CAAC,IAAI;IACrC;AACJ;AACA,MAAM,UAAU;IAAC;IAAG;IAAG;IAAG;IAAG;CAAE;AAC/B,MAAM,MAAM;IAAE,KAAK;AAAE;AACrB;AACA,QAAQ;AACR,WAAW;IACP,IAAI,GAAG,GAAG;AACd,GAAG,MAAO,IAAI;;AACd,WAAW;IACP,OAAO,IAAI,GAAG;AAClB,GAAG,MAAQ,OAAO;;AAClB,WAAW;IACP,IAAI,GAAG,GAAG;AACd,GAAG,MAAO,OAAO;;AAEjB,QAAQ,OAAO,CAAC,CAAC,KAAK;IAClB,eAAe,SAAS,OAAO;AACnC;AACA,QAAQ,IAAI,CAAC,KAAK,QAAQ;;AAC1B,QAAQ,GAAG,GAAI,QAAQ;;AACvB,OAAO,CAAC,EAAE,GAAG,GAAG,KAAK;CAErB,SAAS","sources":["defineProperty.js"],"sourcesContent":["function notifyUpdate() {\r\n    document.getElementById(\"app\").textContent = `${JSON.stringify(obj)}\r\n    ${JSON.stringify(arrData)}`\r\n}\r\nfunction defineProperty(obj, key, val) {\r\n    Object.defineProperty(obj, key, {\r\n        get() {\r\n            console.log(`get ${key}:${val}`);\r\n            return val\r\n        },\r\n        set(newVal) {\r\n            if (newVal !== val) {\r\n                val = newVal\r\n                console.log(`set ${key}:${newVal}`);\r\n                observe(newVal) // 新值是对象的情况\r\n                notifyUpdate()\r\n            }\r\n        }\r\n    })\r\n}\r\nfunction defineReactive(obj, key, val) {\r\n    defineProperty(obj, key, val)\r\n}\r\nfunction observe(obj) {\r\n    if (typeof obj !== 'object' || obj == null) {\r\n        return\r\n    }\r\n    Object.keys(obj).forEach(key => {\r\n        defineReactive(obj, key, obj[key])\r\n    })\r\n}\r\nconst arrData = [1, 2, 3, 4, 5];\r\nconst obj = { foo: 1 }\r\nnotifyUpdate()\r\nobserve(obj)\r\nsetTimeout(() => {\r\n    obj.foo = 2\r\n}, 2000)  //ok\r\nsetTimeout(() => {\r\n    delete obj.foo\r\n}, 4000)   //no ok\r\nsetTimeout(() => {\r\n    obj.abc = 2\r\n}, 6000)  //no ok\r\n\r\narrData.forEach((val, index) => {\r\n    defineProperty(arrData, index, val)\r\n})\r\narrData.push(100) // no ok\r\narrData.pop()  // no ok\r\narrData[0] = 99 // ok\r\n\r\n//改造数组api"],"names":[],"version":3,"file":"index.65c14c12.js.map","sourceRoot":"/__parcel_source_root/"}